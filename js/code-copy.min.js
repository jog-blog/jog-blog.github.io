document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll("pre.chroma, pre:not(.chroma)");e.forEach(function(e){if(e.querySelector(".code-copy-button"))return;const t=document.createElement("button");t.className="code-copy-button",t.textContent="复制",t.title="复制代码到剪贴板",t.style.position="absolute",t.style.top="8px",t.style.right="8px",t.style.padding="4px 8px",t.style.fontSize="12px",t.style.backgroundColor="var(--color-primary)",t.style.color="var(--color-primary-content)",t.style.border="none",t.style.borderRadius="4px",t.style.cursor="pointer",t.style.zIndex="10",t.style.opacity="0",t.style.transition="opacity 0.3s",e.style.position!=="relative"&&(e.style.position="relative"),e.addEventListener("mouseenter",function(){t.style.opacity="1"}),e.addEventListener("mouseleave",function(){setTimeout(function(){e.matches(":hover")||(t.style.opacity="0")},300)}),t.addEventListener("click",function(){let n;const s=e.querySelector("code");s?n=s.textContent:n=e.textContent,navigator.clipboard.writeText(n).then(function(){const e=t.textContent;t.textContent="已复制!",setTimeout(function(){t.textContent=e},2e3)}).catch(function(e){console.error("复制失败:",e),t.textContent="复制失败",setTimeout(function(){t.textContent="复制"},2e3)})}),e.appendChild(t)})})