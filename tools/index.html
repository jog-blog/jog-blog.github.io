<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°å·¥å…·ç®±</title>
    <style>
        :root{
            --bg:#0f1724; 
            --card:#0b1220; 
            --accent:#5eead4; 
            --muted:#94a3b8; 
            --glass:rgba(255,255,255,0.03);
            --radius:12px;
            color-scheme: dark;
        }
        *{box-sizing:border-box}
        body{
            margin:0;
            font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", "Noto Sans", Arial, sans-serif;
            background: linear-gradient(180deg,#071226 0%, #071726 100%);
            color:#e6eef6;
            -webkit-font-smoothing:antialiased;
            -moz-osx-font-smoothing:grayscale;
            padding:28px;
            min-height:100vh;
        }
        header{
            display:flex;align-items:center;gap:16px;margin-bottom:18px;
        }
        header .logo{
            width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent),#60a5fa);display:flex;align-items:center;justify-content:center;font-weight:700;color:#022;box-shadow:0 6px 18px rgba(5,7,15,0.6);
        }
        h1{font-size:20px;margin:0}
        p.lead{margin:0;color:var(--muted);font-size:13px}

        .container{
            display:grid;
            grid-template-columns: 280px 1fr;
            gap:20px;
            align-items:start;
            min-height:60vh;
        }

        /* sidebar */
        nav{
            position:sticky; top:28px;
            background:var(--card);
            border-radius:var(--radius);
            padding:12px;
            box-shadow:0 6px 18px rgba(3,6,15,0.6);
        }
        .tab{
            display:flex;align-items:center;gap:10px;padding:10px;border-radius:10px;margin-bottom:8px;cursor:pointer;
            transition: background 0.2s ease;
        }
        .tab:hover{background:var(--glass)}
        .tab.active{background:linear-gradient(90deg, rgba(94,234,212,0.08), rgba(96,165,250,0.06));border:1px solid rgba(94,234,212,0.08);}

        main{
            background:var(--card);
            border-radius:var(--radius);
            padding:18px;
            box-shadow:0 6px 24px rgba(2,6,16,0.6);
        }

        /* card small */
        .panel{background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);padding:12px;border-radius:10px;margin-bottom:14px}
        label{display:block;font-size:13px;color:var(--muted);margin-bottom:8px}
        .row{display:flex;gap:8px;align-items:center}
        input[type="number"], input[type="text"], select, textarea{
            background:rgba(255,255,255,0.03);
            border:1px solid rgba(255,255,255,0.03);
            color:inherit;
            padding:8px 10px;border-radius:8px;outline:none;width:100%;
            transition: border-color 0.2s ease;
        }
        input:focus, select:focus, textarea:focus{
            border-color: var(--accent);
            outline: none;
        }
        button{
            background:linear-gradient(90deg,var(--accent),#60a5fa);
            color:#022;border:0;padding:9px 12px;border-radius:10px;font-weight:600;cursor:pointer;
            box-shadow:0 6px 18px rgba(5,7,15,0.45);
            transition: transform 0.1s ease;
        }
        button:hover{
            transform: translateY(-1px);
        }
        button:active{
            transform: translateY(1px);
        }
        button.ghost{
            background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);
        }
        .flex{display:flex;gap:8px}
        .copy-btn{padding:8px 10px;border-radius:8px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);cursor:pointer}
        .output{background:#031224;padding:10px;border-radius:8px;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace; font-size:13px; color:#bfeaf0}

        .small{font-size:13px;color:var(--muted)}
        footer{margin-top:12px;color:var(--muted);font-size:12px}

        /* responsive */
        @media (max-width:880px){
            .container{grid-template-columns: 1fr; padding-bottom:40px}
            nav{position:relative;top:auto;margin-bottom:12px}
        }

        /* progress circle for timer */
        .timer-display{display:flex;align-items:center;gap:18px}
        .progress-ring{width:84px;height:84px;position:relative;display:inline-block}
        .progress-text{font-size:18px;font-weight:700}

        /* é€šçŸ¥æç¤º */
        .toast{
            position:fixed;bottom:20px;right:20px;background:var(--card);border-left:3px solid var(--accent);padding:10px 16px;border-radius:6px;box-shadow:0 4px 12px rgba(0,0,0,0.2);transform:translateY(100px);opacity:0;transition:all 0.3s ease;z-index:1000;
        }
        .toast.show{transform:translateY(0);opacity:1;}
    </style>
</head>
<body>
    <header>
        <div class="logo">å·¥å…·</div>
        <div>
            <h1>å°å·¥å…·ç®±</h1>
            <p class="lead">å¯†ç /å–è‰²/å€’è®¡æ—¶/Lorem/å•ä½è½¬æ¢ â€” å•æ–‡ä»¶ã€å¯å¤åˆ¶ã€å¯æ‰©å±•</p>
        </div>
    </header>

    <div class="container">
        <nav aria-label="å·¥å…·èœå•">
            <div id="tab-password" class="tab active" data-target="password" tabindex="0" role="button" aria-selected="true">
                <strong>ğŸ” å¯†ç ç”Ÿæˆå™¨</strong>
                <div style="margin-left:auto" class="small">ç”Ÿæˆ & å¤åˆ¶</div>
            </div>
            <div id="tab-color" class="tab" data-target="color" tabindex="0" role="button" aria-selected="false">
                <strong>ğŸ¨ é¢œè‰²å–å€¼å™¨</strong>
                <div style="margin-left:auto" class="small">HEX / RGB</div>
            </div>
            <div id="tab-timer" class="tab" data-target="timer" tabindex="0" role="button" aria-selected="false">
                <strong>â± å€’è®¡æ—¶å™¨</strong>
                <div style="margin-left:auto" class="small">å¼€å§‹/æš‚åœ</div>
            </div>
            <div id="tab-lorem" class="tab" data-target="lorem" tabindex="0" role="button" aria-selected="false">
                <strong>âœï¸ Lorem ç”Ÿæˆå™¨</strong>
                <div style="margin-left:auto" class="small">æ–‡ç« å ä½</div>
            </div>
            <div id="tab-convert" class="tab" data-target="convert" tabindex="0" role="button" aria-selected="false">
                <strong>ğŸ” å•ä½è½¬æ¢</strong>
                <div style="margin-left:auto" class="small">å¸¸ç”¨äº’è½¬</div>
            </div>

            <div style="height:10px"></div>
            <div class="small" style="opacity:0.9">æç¤ºï¼šæ¯ä¸ªé¢æ¿éƒ½å¸¦æœ‰å¤åˆ¶åŠŸèƒ½ã€‚ä»£ç æ˜“äºä¿®æ”¹ï¼Œæƒ³è¦æ·»åŠ æ–°å·¥å…·ç›´æ¥å‘Šè¯‰æˆ‘ã€‚</div>
        </nav>

        <main>
            <!-- å¯†ç ç”Ÿæˆ -->
            <section id="password" class="panel" role="region" aria-labelledby="tab-password">
                <h2 style="margin:0 0 8px 0">ğŸ” å¯†ç ç”Ÿæˆå™¨</h2>
                <div class="row" style="gap:12px">
                    <div style="flex:1">
                        <label for="pw-length">é•¿åº¦ï¼ˆ4 - 64ï¼‰</label>
                        <input id="pw-length" type="number" min="4" max="64" value="16" aria-label="å¯†ç é•¿åº¦" />
                    </div>
                    <div style="width:140px">
                        <label for="pw-strength">å¤æ‚åº¦</label>
                        <select id="pw-strength" aria-label="å¯†ç å¤æ‚åº¦">
                            <option value="1">ç®€å•ï¼ˆå­—æ¯ï¼‰</option>
                            <option value="2" selected>ä¸­ç­‰ï¼ˆ+æ•°å­—ï¼‰</option>
                            <option value="3">å¤æ‚ï¼ˆ+ç¬¦å·ï¼‰</option>
                        </select>
                    </div>
                </div>

                <div style="display:flex;gap:8px;margin-top:10px">
                    <button id="gen-pw" aria-label="ç”Ÿæˆå¯†ç ">ç”Ÿæˆå¯†ç </button>
                    <button id="copy-pw" class="ghost" aria-label="å¤åˆ¶å¯†ç ">å¤åˆ¶</button>
                    <button id="shuffle-pw" class="ghost" aria-label="é‡æ–°ç”Ÿæˆå¯†ç ">å†æ¥ä¸€æ¡</button>
                </div>

                <div style="margin-top:12px">
                    <label for="pw-output">ç»“æœ</label>
                    <div id="pw-output" class="output" aria-live="polite">ç‚¹å‡»â€œç”Ÿæˆå¯†ç â€å¼€å§‹</div>
                </div>
            </section>

            <!-- é¢œè‰²å–å€¼ -->
            <section id="color" class="panel" role="region" aria-labelledby="tab-color" hidden>
                <h2 style="margin:0 0 8px 0">ğŸ¨ é¢œè‰²å–å€¼å™¨</h2>
                <label>é€‰æ‹©é¢œè‰²</label>
                <div class="row">
                    <input id="color-picker" type="color" value="#60a5fa" style="height:44px;width:64px;padding:0;border-radius:8px;border:none;" aria-label="é¢œè‰²é€‰æ‹©å™¨"/>
                    <input id="color-hex" type="text" value="#60a5fa" aria-label="HEXé¢œè‰²å€¼" />
                    <button id="copy-hex" class="copy-btn" aria-label="å¤åˆ¶HEXé¢œè‰²å€¼">å¤åˆ¶ HEX</button>
                </div>

                <div style="margin-top:10px" class="row">
                    <div style="flex:1">
                        <label for="color-rgb">RGB</label>
                        <input id="color-rgb" type="text" readonly class="output" aria-label="RGBé¢œè‰²å€¼" />
                    </div>
                    <div style="width:120px">
                        <label>é€æ˜èƒŒæ™¯é¢„è§ˆ</label>
                        <div id="color-swatch" style="height:44px;border-radius:8px;border:1px solid rgba(255,255,255,0.03)" aria-label="é¢œè‰²é¢„è§ˆ"></div>
                    </div>
                </div>
            </section>

            <!-- å€’è®¡æ—¶ -->
            <section id="timer" class="panel" role="region" aria-labelledby="tab-timer" hidden>
                <h2 style="margin:0 0 8px 0">â± å€’è®¡æ—¶å™¨</h2>
                <label for="timer-min">è®¾ç½®æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰</label>
                <div class="row">
                    <input id="timer-min" type="number" value="5" min="0" aria-label="å€’è®¡æ—¶åˆ†é’Ÿæ•°" />
                    <button id="timer-set" class="ghost" aria-label="è®¾ç½®å€’è®¡æ—¶æ—¶é—´">è®¾ç½®</button>
                    <button id="timer-start" aria-label="å¼€å§‹å€’è®¡æ—¶">å¼€å§‹</button>
                    <button id="timer-pause" class="ghost" aria-label="æš‚åœå€’è®¡æ—¶">æš‚åœ</button>
                    <button id="timer-reset" class="ghost" aria-label="é‡ç½®å€’è®¡æ—¶">é‡ç½®</button>
                </div>

                <div style="margin-top:12px" class="timer-display">
                    <div class="progress-ring" aria-hidden="true">
                        <svg viewBox="0 0 120 120" width="84" height="84">
                            <defs><linearGradient id="g1" x1="0" x2="1"><stop offset="0" stop-color="#5eead4"/><stop offset="1" stop-color="#60a5fa"/></linearGradient></defs>
                            <circle cx="60" cy="60" r="48" stroke="rgba(255,255,255,0.06)" stroke-width="12" fill="none"></circle>
                            <circle id="progress" cx="60" cy="60" r="48" stroke="url(#g1)" stroke-width="12" fill="none" stroke-linecap="round" transform="rotate(-90 60 60)" stroke-dasharray="301.59" stroke-dashoffset="0"></circle>
                        </svg>
                    </div>
                    <div>
                        <div class="progress-text" id="timer-text" aria-live="polite">05:00</div>
                        <div class="small">å€’è®¡æ—¶çŠ¶æ€ï¼š<span id="timer-status">å·²åœæ­¢</span></div>
                    </div>
                </div>
            </section>

            <!-- Lorem -->
            <section id="lorem" class="panel" role="region" aria-labelledby="tab-lorem" hidden>
                <h2 style="margin:0 0 8px 0">âœï¸ Lorem ç”Ÿæˆå™¨</h2>
                <label for="lorem-count">æ®µè½æ•°ï¼ˆ1 - 10ï¼‰</label>
                <div class="row">
                    <input id="lorem-count" type="number" min="1" max="10" value="3" aria-label="æ®µè½æ•°é‡" />
                    <button id="gen-lorem" aria-label="ç”ŸæˆLoremæ–‡æœ¬">ç”Ÿæˆ</button>
                    <button id="copy-lorem" class="ghost" aria-label="å¤åˆ¶Loremæ–‡æœ¬">å¤åˆ¶</button>
                </div>

                <div style="margin-top:12px">
                    <textarea id="lorem-out" rows="8" style="width:100%;border-radius:8px;padding:10px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);color:inherit" aria-label="Loremæ–‡æœ¬ç»“æœ"></textarea>
                </div>
            </section>

            <!-- å•ä½è½¬æ¢ -->
            <section id="convert" class="panel" role="region" aria-labelledby="tab-convert" hidden>
                <h2 style="margin:0 0 8px 0">ğŸ” å•ä½è½¬æ¢</h2>

                <div style="display:grid;gap:12px">
                    <div class="row">
                        <div style="flex:1">
                            <label for="len-input">é•¿åº¦ï¼ˆå˜ç±³ â†” è‹±å¯¸ï¼‰</label>
                            <div class="row">
                                <input id="len-input" type="number" value="100" aria-label="é•¿åº¦å€¼" />
                                <select id="len-dir" aria-label="é•¿åº¦è½¬æ¢æ–¹å‘">
                                    <option value="cm-to-inch">cm â†’ inch</option>
                                    <option value="inch-to-cm">inch â†’ cm</option>
                                </select>
                                <button id="len-conv" aria-label="è½¬æ¢é•¿åº¦å•ä½">è½¬æ¢</button>
                            </div>
                            <div class="small" id="len-out" style="margin-top:8px" aria-live="polite">ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ</div>
                        </div>
                    </div>

                    <div class="row">
                        <div style="flex:1">
                            <label for="mass-input">è´¨é‡ï¼ˆkg â†” lbï¼‰</label>
                            <div class="row">
                                <input id="mass-input" type="number" value="70" aria-label="è´¨é‡å€¼" />
                                <select id="mass-dir" aria-label="è´¨é‡è½¬æ¢æ–¹å‘">
                                    <option value="kg-to-lb">kg â†’ lb</option>
                                    <option value="lb-to-kg">lb â†’ kg</option>
                                </select>
                                <button id="mass-conv" aria-label="è½¬æ¢è´¨é‡å•ä½">è½¬æ¢</button>
                            </div>
                            <div class="small" id="mass-out" style="margin-top:8px" aria-live="polite">ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ</div>
                        </div>
                    </div>

                    <div class="row">
                        <div style="flex:1">
                            <label for="temp-input">æ¸©åº¦ï¼ˆâ„ƒ â†” â„‰ï¼‰</label>
                            <div class="row">
                                <input id="temp-input" type="number" value="25" aria-label="æ¸©åº¦å€¼" />
                                <select id="temp-dir" aria-label="æ¸©åº¦è½¬æ¢æ–¹å‘">
                                    <option value="c-to-f">â„ƒ â†’ â„‰</option>
                                    <option value="f-to-c">â„‰ â†’ â„ƒ</option>
                                </select>
                                <button id="temp-conv" aria-label="è½¬æ¢æ¸©åº¦å•ä½">è½¬æ¢</button>
                            </div>
                            <div class="small" id="temp-out" style="margin-top:8px" aria-live="polite">ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ</div>
                        </div>
                    </div>
                </div>
            </section>

            <footer>ç‰ˆæœ¬ 1.1 Â· å¦‚æœä½ éœ€è¦ Export/Importã€æœ¬åœ°å­˜å‚¨ã€æ·±è‰²/æµ…è‰²ä¸»é¢˜æˆ–æ›´å¤šå°å·¥å…·ï¼Œå‘Šè¯‰æˆ‘æˆ‘å¯ä»¥ç›´æ¥å¸®ä½ åŠ ä¸Šã€‚</footer>
        </main>
    </div>

    <!-- é€šçŸ¥æç¤ºç»„ä»¶ -->
    <div id="toast" class="toast" role="status" aria-live="polite"></div>

    <script>
        // é€šçŸ¥æç¤ºåŠŸèƒ½
        function showToast(message, duration = 2000) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, duration);
        }

        // ======= Tab åˆ‡æ¢å¤„ç† =======
        const tabs = document.querySelectorAll('nav .tab');
        tabs.forEach(tab => {
            // æ”¯æŒé”®ç›˜å¯¼èˆª
            tab.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    tab.click();
                }
            });

            tab.addEventListener('click', () => {
                // æ›´æ–°æ ‡ç­¾çŠ¶æ€
                tabs.forEach(t => {
                    t.classList.remove('active');
                    t.setAttribute('aria-selected', 'false');
                });
                tab.classList.add('active');
                tab.setAttribute('aria-selected', 'true');
                
                // æ˜¾ç¤ºå¯¹åº”å†…å®¹
                const target = tab.dataset.target;
                document.querySelectorAll('main section').forEach(section => {
                    section.hidden = section.id !== target;
                });

                // èšç„¦åˆ°å¯¹åº”åŒºåŸŸçš„ç¬¬ä¸€ä¸ªå¯äº¤äº’å…ƒç´ 
                setTimeout(() => {
                    const section = document.getElementById(target);
                    const focusable = section.querySelector('input, button, textarea, select');
                    if (focusable) focusable.focus();
                }, 50);
            });
        });

        // ======= å¯†ç ç”Ÿæˆå™¨ =======
        const pwOut = document.getElementById('pw-output');
        
        function genPassword(length = 16, strength = 2) {
            const lower = 'abcdefghijklmnopqrstuvwxyz';
            const upper = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            const nums = '0123456789';
            const syms = '!@#$%^&*()-_=+[]{};:,.<>/?';
            
            let chars = lower + upper;
            if (strength >= 2) chars += nums;
            if (strength >= 3) chars += syms;
            
            let pw = '';
            const cryptoObj = window.crypto || window.msCrypto;
            
            // ä½¿ç”¨åŠ å¯†çº§éšæœºæ•°ç”Ÿæˆæ›´å®‰å…¨çš„å¯†ç 
            for (let i = 0; i < length; i++) {
                const rnd = cryptoObj && cryptoObj.getRandomValues 
                    ? cryptoObj.getRandomValues(new Uint32Array(1))[0] 
                    : Math.floor(Math.random() * 0xffffffff);
                pw += chars[rnd % chars.length];
            }
            return pw;
        }
        
        document.getElementById('gen-pw').addEventListener('click', () => {
            // è¾“å…¥éªŒè¯å’Œè¾¹ç•Œå¤„ç†
            const lenInput = document.getElementById('pw-length');
            const len = Math.max(4, Math.min(64, Number(lenInput.value) || 16));
            // ä¿®æ­£è¾“å…¥æ¡†å€¼ï¼ˆå¦‚æœè¶…å‡ºèŒƒå›´ï¼‰
            if (len !== Number(lenInput.value)) {
                lenInput.value = len;
            }
            
            const strength = Number(document.getElementById('pw-strength').value || 2);
            const password = genPassword(len, strength);
            pwOut.textContent = password;
        });
        
        document.getElementById('shuffle-pw').addEventListener('click', () => {
            document.getElementById('gen-pw').click();
        });
        
        document.getElementById('copy-pw').addEventListener('click', async () => {
            try {
                const text = pwOut.textContent || '';
                if (!text || text === 'ç‚¹å‡»â€œç”Ÿæˆå¯†ç â€å¼€å§‹') {
                    showToast('æ²¡æœ‰å¯å¤åˆ¶çš„å¯†ç ');
                    return;
                }
                await navigator.clipboard.writeText(text);
                showToast('å¯†ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
            } catch (e) {
                showToast('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
            }
        });

        // ======= é¢œè‰²å–å€¼å™¨ =======
        const colorPicker = document.getElementById('color-picker');
        const hexInput = document.getElementById('color-hex');
        const rgbOutput = document.getElementById('color-rgb');
        const colorSwatch = document.getElementById('color-swatch');
        
        function hexToRgb(hex) {
            // è§„èŒƒåŒ–HEXå€¼
            let hexValue = hex.replace('#', '');
            if (hexValue.length === 3) {
                hexValue = hexValue.split('').map(ch => ch + ch).join('');
            }
            return [
                parseInt(hexValue.slice(0, 2), 16),
                parseInt(hexValue.slice(2, 4), 16),
                parseInt(hexValue.slice(4, 6), 16)
            ];
        }
        
        function updateColor(hex) {
            hexInput.value = hex;
            try {
                const [r, g, b] = hexToRgb(hex);
                rgbOutput.value = `rgb(${r}, ${g}, ${b})`;
                colorSwatch.style.background = hex;
            } catch (e) {
                showToast('æ— æ•ˆçš„é¢œè‰²å€¼');
            }
        }
        
        colorPicker.addEventListener('input', e => {
            updateColor(e.target.value);
        });
        
        hexInput.addEventListener('change', e => {
            const val = e.target.value.trim();
            // ä¸¥æ ¼éªŒè¯HEXæ ¼å¼
            if (/^#?[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/.test(val)) {
                const hex = val.startsWith('#') ? val : `#${val}`;
                colorPicker.value = hex;
                updateColor(hex);
            } else {
                showToast('è¯·è¾“å…¥æœ‰æ•ˆçš„HEXå€¼ï¼Œä¾‹å¦‚ #60a5fa æˆ– #f00');
                // æ¢å¤åˆ°ä¹‹å‰çš„æœ‰æ•ˆå€¼
                e.target.value = colorPicker.value;
            }
        });
        
        document.getElementById('copy-hex').addEventListener('click', async () => {
            try {
                await navigator.clipboard.writeText(hexInput.value);
                showToast('HEXå€¼å·²å¤åˆ¶');
            } catch (e) {
                showToast('å¤åˆ¶å¤±è´¥');
            }
        });
        
        // åˆå§‹åŒ–é¢œè‰²
        updateColor(colorPicker.value);

        // ======= å€’è®¡æ—¶å™¨ =======
        let timerTotal = 300; // ç§’
        let timerRemaining = timerTotal;
        let timerInterval = null;
        const progressEl = document.getElementById('progress');
        const timerText = document.getElementById('timer-text');
        const timerStatus = document.getElementById('timer-status');
        
        function formatTime(seconds) {
            const mm = String(Math.floor(seconds / 60)).padStart(2, '0');
            const ss = String(Math.floor(seconds % 60)).padStart(2, '0');
            return `${mm}:${ss}`;
        }
        
        function setTimer(minutes) {
            const min = Math.max(0, Math.floor(Number(minutes) || 0));
            // ä¿®æ­£è¾“å…¥æ¡†å€¼
            document.getElementById('timer-min').value = min;
            
            timerTotal = min * 60;
            timerRemaining = timerTotal;
            timerText.textContent = formatTime(timerRemaining);
            updateProgress(1);
            timerStatus.textContent = 'å·²åœæ­¢';
        }
        
        function updateProgress(fraction) {
            // ç²¾ç¡®è®¡ç®—åœ†å‘¨é•¿ (2 * Ï€ * r)
            const circumference = 2 * Math.PI * 48;
            const offset = circumference * (1 - fraction);
            progressEl.style.strokeDasharray = `${circumference}`;
            progressEl.style.strokeDashoffset = offset;
        }
        
        function startTimer() {
            if (timerInterval) return;
            if (timerTotal <= 0) {
                showToast('è¯·å…ˆè®¾ç½®å¤§äº0çš„æ—¶é—´');
                return;
            }
            
            timerStatus.textContent = 'è¿è¡Œä¸­';
            const endAt = Date.now() + timerRemaining * 1000;
            
            timerInterval = setInterval(() => {
                const now = Date.now();
                timerRemaining = Math.max(0, Math.round((endAt - now) / 1000));
                timerText.textContent = formatTime(timerRemaining);
                updateProgress(timerTotal ? (timerRemaining / timerTotal) : 0);
                
                if (timerRemaining <= 0) {
                    clearInterval(timerInterval);
                    timerInterval = null;
                    timerStatus.textContent = 'å·²å®Œæˆ';
                    // æ’­æ”¾æç¤ºéŸ³
                    try {
                        const audio = new Audio('data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAQB8AAIA+AAACABAAZGF0YQAAAAA=');
                        audio.play();
                    } catch (e) { /* å¿½ç•¥æ’­æ”¾å¤±è´¥ */ }
                    showToast('â° æ—¶é—´åˆ°ï¼');
                }
            }, 250);
        }
        
        function pauseTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
                timerStatus.textContent = 'å·²æš‚åœ';
            }
        }
        
        function resetTimer() {
            pauseTimer();
            timerRemaining = timerTotal;
            timerText.textContent = formatTime(timerRemaining);
            updateProgress(1);
            timerStatus.textContent = 'å·²åœæ­¢';
        }
        
        document.getElementById('timer-set').addEventListener('click', () => {
            setTimer(document.getElementById('timer-min').value);
        });
        
        document.getElementById('timer-start').addEventListener('click', startTimer);
        document.getElementById('timer-pause').addEventListener('click', pauseTimer);
        document.getElementById('timer-reset').addEventListener('click', resetTimer);
        
        // åˆå§‹åŒ–å€’è®¡æ—¶
        setTimer(Number(document.getElementById('timer-min').value));

        // ======= Lorem ç”Ÿæˆå™¨ =======
        const loremBase = [
            "Lorem ipsum dolor sit amet, consectetur adipiscing elit.",
            "Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
            "Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.",
            "Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.",
            "Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
        ];
        
        function genLorem(paragraphs = 3) {
            const output = [];
            for (let i = 0; i < paragraphs; i++) {
                // éšæœºç”Ÿæˆ3-6ä¸ªå¥å­
                const sentenceCount = 3 + Math.floor(Math.random() * 4);
                const sentences = Array.from({ length: sentenceCount }, (_, j) => 
                    loremBase[(i + j) % loremBase.length]
                );
                output.push(sentences.join(' '));
            }
            return output.join('\n\n');
        }
        
        document.getElementById('gen-lorem').addEventListener('click', () => {
            const countInput = document.getElementById('lorem-count');
            const count = Math.max(1, Math.min(10, Number(countInput.value) || 3));
            // ä¿®æ­£è¾“å…¥æ¡†å€¼
            if (count !== Number(countInput.value)) {
                countInput.value = count;
            }
            document.getElementById('lorem-out').value = genLorem(count);
        });
        
        document.getElementById('copy-lorem').addEventListener('click', async () => {
            try {
                const text = document.getElementById('lorem-out').value || '';
                if (!text) {
                    showToast('æ²¡æœ‰å¯å¤åˆ¶çš„å†…å®¹ï¼Œè¯·å…ˆç”Ÿæˆ');
                    return;
                }
                await navigator.clipboard.writeText(text);
                showToast('å†…å®¹å·²å¤åˆ¶');
            } catch (e) {
                showToast('å¤åˆ¶å¤±è´¥');
            }
        });

        // ======= å•ä½è½¬æ¢ =======
        // é•¿åº¦è½¬æ¢
        document.getElementById('len-conv').addEventListener('click', () => {
            const value = Number(document.getElementById('len-input').value) || 0;
            const direction = document.getElementById('len-dir').value;
            let result;
            
            if (direction === 'cm-to-inch') {
                result = `${value} cm = ${(value / 2.54).toFixed(4)} in`;
            } else {
                result = `${value} in = ${(value * 2.54).toFixed(4)} cm`;
            }
            document.getElementById('len-out').textContent = result;
        });
        
        // è´¨é‡è½¬æ¢
        document.getElementById('mass-conv').addEventListener('click', () => {
            const value = Number(document.getElementById('mass-input').value) || 0;
            const direction = document.getElementById('mass-dir').value;
            let result;
            
            if (direction === 'kg-to-lb') {
                result = `${value} kg = ${(value * 2.2046226218).toFixed(4)} lb`;
            } else {
                result = `${value} lb = ${(value / 2.2046226218).toFixed(4)} kg`;
            }
            document.getElementById('mass-out').textContent = result;
        });
        
        // æ¸©åº¦è½¬æ¢
        document.getElementById('temp-conv').addEventListener('click', () => {
            const value = Number(document.getElementById('temp-input').value) || 0;
            const direction = document.getElementById('temp-dir').value;
            let result;
            
            if (direction === 'c-to-f') {
                result = `${value}â„ƒ = ${(value * 9/5 + 32).toFixed(2)}â„‰`;
            } else {
                result = `${value}â„‰ = ${((value - 32) * 5/9).toFixed(2)}â„ƒ`;
            }
            document.getElementById('temp-out').textContent = result;
        });

        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨ç”Ÿæˆå¯†ç å’ŒLoremæ–‡æœ¬
        window.addEventListener('DOMContentLoaded', () => {
            document.getElementById('gen-pw').click();
            document.getElementById('gen-lorem').click();
        });
    </script>
</body>
</html>
